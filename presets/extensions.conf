[general]
static=yes
writeprotect=no
clearglobalvars=no
;
[globals]

[gsm_out]

exten=>_XXX,1,NoOp('call to ${EXTEN}')
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(gate=RU666_SIM))
       ; same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(gate=RU666_SIM))
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(pf=100))
      ;  same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(pf=200))
        ;;;same=> n,NoOp(${MATH(${CALLERID(num)}-${pf},i)}))
        same=> n,NoOp(${MATH(${CALLERID(num)}+${pf},i)}))
        ;same=> n,Set(pfix=${MATH(${CALLERID(num)}+${pf},i)})
        same=> n,Set(pfix=${MATH(${CALLERID(num)}-${pf},i)})
        same=> n,Set(dpfix=${MATH(${CALLERID(num)}+0,i)})
        same=> n,Dial(PJSIP/${dpfix}${EXTEN}@${gate}${pfix},120,)
        same=> n,Hangup()

exten=>_XXXX,1,NoOp('call to ${EXTEN}')
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(gate=RU666_SIM))
       ; same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(gate=RU666_SIM))
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(pf=100))
      ;  same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(pf=200))
        ;;;same=> n,NoOp(${MATH(${CALLERID(num)}-${pf},i)}))
        same=> n,NoOp(${MATH(${CALLERID(num)}+${pf},i)}))
        ;same=> n,Set(pfix=${MATH(${CALLERID(num)}+${pf},i)})
        same=> n,Set(pfix=${MATH(${CALLERID(num)}-${pf},i)})
        same=> n,Set(dpfix=${MATH(${CALLERID(num)}+0,i)})
        same=> n,Dial(PJSIP/${dpfix}${EXTEN}@${gate}${pfix},120,)
        same=> n,Hangup()


exten=>_XXXXX,1,NoOp('call to ${EXTEN}')
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(gate=RU666_SIM))
       ; same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(gate=RU666_SIM))
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(pf=100))
      ;  same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(pf=200))
        ;;;same=> n,NoOp(${MATH(${CALLERID(num)}-${pf},i)}))
        same=> n,NoOp(${MATH(${CALLERID(num)}+${pf},i)}))
        ;same=> n,Set(pfix=${MATH(${CALLERID(num)}+${pf},i)})
        same=> n,Set(pfix=${MATH(${CALLERID(num)}-${pf},i)})
        same=> n,Set(dpfix=${MATH(${CALLERID(num)}+0,i)})
        same=> n,Dial(PJSIP/${dpfix}${EXTEN}@${gate}${pfix},120,)
        same=> n,Hangup()

exten=>_XXXXXX,1,NoOp('call to ${EXTEN}')
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(gate=RU666_SIM))
       ; same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(gate=RU666_SIM))
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(pf=100))
      ;  same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(pf=200))
        ;;;same=> n,NoOp(${MATH(${CALLERID(num)}-${pf},i)}))
        same=> n,NoOp(${MATH(${CALLERID(num)}+${pf},i)}))
        ;same=> n,Set(pfix=${MATH(${CALLERID(num)}+${pf},i)})
        same=> n,Set(pfix=${MATH(${CALLERID(num)}-${pf},i)})
        same=> n,Set(dpfix=${MATH(${CALLERID(num)}+0,i)})
        same=> n,Dial(PJSIP/${dpfix}${EXTEN}@${gate}${pfix},120,)
        same=> n,Hangup()

exten=>_XXXXXXX,1,NoOp('call to ${EXTEN}')
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(gate=RU666_SIM))
       ; same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(gate=RU666_SIM))
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(pf=100))
      ;  same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(pf=200))
        ;;;same=> n,NoOp(${MATH(${CALLERID(num)}-${pf},i)}))
        same=> n,NoOp(${MATH(${CALLERID(num)}+${pf},i)}))
        ;same=> n,Set(pfix=${MATH(${CALLERID(num)}+${pf},i)})
        same=> n,Set(pfix=${MATH(${CALLERID(num)}-${pf},i)})
        same=> n,Set(dpfix=${MATH(${CALLERID(num)}+0,i)})
        same=> n,Dial(PJSIP/${dpfix}${EXTEN}@${gate}${pfix},120,)
        same=> n,Hangup()


exten=>_+X.,1,NoOp('call to ${EXTEN}')
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(gate=RU666_SIM))
       ; same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(gate=RU666_SIM))
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(pf=100))
      ;  same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(pf=200))
        ;;;same=> n,NoOp(${MATH(${CALLERID(num)}-${pf},i)}))
        same=> n,NoOp(${MATH(${CALLERID(num)}+${pf},i)}))
        ;same=> n,Set(pfix=${MATH(${CALLERID(num)}+${pf},i)})
        same=> n,Set(pfix=${MATH(${CALLERID(num)}-${pf},i)})
        same=> n,Set(dpfix=${MATH(${CALLERID(num)}+0,i)})
        same=> n,Dial(PJSIP/${dpfix}${EXTEN}@${gate}${pfix},120,)
        same=> n,Hangup()

exten=>_X.,1,NoOp('call to ${EXTEN}')
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(gate=RU666_SIM))
       ; same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(gate=RU666_SIM))
        same=> n,Execif($[ "${CALLERID(num):0:1}"="1" ]?Set(pf=100))
      ;  same=> n,Execif($[ "${CALLERID(num):0:1}"="2" ]?Set(pf=200))
        ;;;same=> n,NoOp(${MATH(${CALLERID(num)}-${pf},i)}))
        same=> n,NoOp(${MATH(${CALLERID(num)}+${pf},i)}))
        ;same=> n,Set(pfix=${MATH(${CALLERID(num)}+${pf},i)})
        same=> n,Set(pfix=${MATH(${CALLERID(num)}-${pf},i)})
        same=> n,Set(dpfix=${MATH(${CALLERID(num)}+0,i)})
        same=> n,Dial(PJSIP/${dpfix}+${EXTEN}@${gate}${pfix},120,)
        same=> n,Hangup()



[gsm_in]
exten=>_X.,1,NoOp('call to ${EXTEN}')
;        same=> n,Hangup(34)
        same=> n,Set(pfix=${MATH(${EXTEN}-0,i)})
        same=> n,Dial(PJSIP/${pfix},120,)
        same=> n,Set(pfix=${MATH(${EXTEN}-100,i)})
        same=> n,Dial(PJSIP/${pfix},120,)
